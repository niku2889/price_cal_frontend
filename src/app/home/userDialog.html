<p-toast position="top-right"></p-toast>

<div class="card-body">
    <div *ngIf="isFirstEntry" class="text-center">
        <button (click)="firstEntry('existing')" class="btn  btn-info ">Retrieve Previous Report/Version</button>
        <div class="hr-sect">OR</div>
        <button (click)="firstEntry('new')" class="btn   btn-info ">Generate a New Report</button>
    </div>

    <form *ngIf="isNew" [formGroup]="form" (ngSubmit)="submit()">
        <div class="input-group form-group">
            <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-user"></i></span>
            </div>
            <input type="text" formControlName="userName" class="form-control" placeholder="Your Name" required>

        </div>
        <div *ngIf="form.controls['userName'].invalid && (form.controls['userName'].dirty || form.controls['userName'].touched)"
            class="alert alert-danger">
            <div *ngIf="form.controls['userName'].errors.required">
                User Name is required.
            </div>
        </div>
        <div class="input-group form-group">
            <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-envelope"></i></span>
            </div>
            <input type="text" formControlName="email" class="form-control"
                placeholder="Email Address (test@dicentral.com)" required>
        </div>
        <div *ngIf="form.controls['email'].invalid && (form.controls['email'].dirty || form.controls['email'].touched)"
            class="alert alert-danger">
            <div *ngIf="form.controls['email'].errors.required">
                Email is required.
            </div>
            <div *ngIf="form.controls['email'].errors.email || form.controls['email'].invalid">
                Invalid email format.
            </div>
        </div>
        <div class="input-group form-group">
            <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-handshake-o"></i></span>
            </div>
            <input type="number" formControlName="dealId" class="form-control" placeholder="Enter the Deal Id" required>
        </div>
        <div *ngIf="form.controls['dealId'].invalid && (form.controls['dealId'].dirty || form.controls['dealId'].touched)"
            class="alert alert-danger">
            <div *ngIf="form.controls['dealId'].errors.required">
                Deal-id is required.
            </div>
        </div>
        <div class="input-group form-group">
            <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-user-circle-o"></i></span>
            </div>
            <input type="text" formControlName="customerName" class="form-control" placeholder="Enter the Customer Name"
                required>
        </div>
        <div *ngIf="form.controls['customerName'].invalid && (form.controls['customerName'].dirty || form.controls['customerName'].touched)"
            class="alert alert-danger">
            <div *ngIf="form.controls['customerName'].errors.required">
                Customer Name is required.
            </div>
        </div>
        <div class="input-group form-group">
            <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-money"></i></span>
            </div>
            <select formControlName="currency" class="form-control">
                <option *ngFor="let item of data.currencyData" value="{{item.Currency}}"> {{item.Currency}}</option>

            </select>
        </div>
        <div class="form-group text-center">
            <a *ngIf="!isBack" style="cursor: pointer;" (click)="goBack()" class="float-left pointer"><i
                    class="fa fa-arrow-left"></i>
                Back</a>
            <input type="submit" value="Submit" [disabled]="form.invalid" class="btn btn-info btn-sm">
            <button *ngIf="isBack" class="btn btn-danger btn-default btn-sm ml-4 ng-star-inserted"  (click)="onNoClick()">Close</button>
        </div>
    </form>

    <form *ngIf="isExisting" [formGroup]="form1" (ngSubmit)="submit1()">
        <div class="input-group form-group">
            <div class="input-group-prepend">
                <span class="input-group-text"><i class="fa fa-file-text"></i></span>
            </div>
            <input type="text" formControlName="reportId" class="form-control text-uppercase"
                placeholder="Enter Quotation number (ex: PC-123-V1)" required>

        </div>
        <div *ngIf="form1.controls['reportId'].invalid && (form1.controls['reportId'].dirty || form1.controls['reportId'].touched)"
            class="alert alert-danger">
            <div *ngIf="form1.controls['reportId'].errors.required">
                Quotation Number / Report Id is required.
            </div>
        </div>

        <div class="form-group text-center">
            <a style="cursor: pointer;" (click)="goBack()" class="float-left pointer"><i class="fa fa-arrow-left"></i>
                Back</a>
            <input type="submit" value="Submit" [disabled]="form1.invalid" class="btn btn-info btn-sm">
        </div>
    </form>
</div>